---
import GitHubIcon from './icons/GitHubIcon.astro';
import Link from './icons/Link.astro';

interface Technology {
  name: string;
  icon: (_props: Record<string, any>) => any;
  colorBack?: string;
  colorBorder?: string;
}

interface Props {
  title: string;
  image: string;
  description: string;
  codeLink?: string;
  previewLink?: string;
  technologies?: Technology[];
}

const {
  title,
  image,
  description,
  codeLink,
  previewLink,
  technologies = [],
} = Astro.props as Props;
---

<div
  class="group max-w-[90%] sm:max-w-full mx-auto border 
  border-gray-700 rounded-md overflow-hidden bg-gray-900/50 backdrop-blur-md 
  transition-all duration-300 shadow-md 
  hover:border-white mt-10 hover:shadow-[0_0_20px_4px_rgba(255,255,255,0.5)]
  active:border-white active:shadow-[0_0_20px_4px_rgba(255,255,255,0.5)]"
>
  <div class="overflow-hidden">
    <img
      src={image}
      alt={title}
      class="w-full h-90 object-cover transition-transform duration-500 group-hover:scale-105 group-active:scale-105 mask-b-from-20% mask-b-to-99%"
    />
  </div>
  <div class="p-4 text-center">
    {
      technologies.length > 0 && (
        <div class="flex flex-wrap justify-center gap-2 mb-4 -mt-6">
          {technologies.map(({ name, icon: Icon, colorBack, colorBorder }) => (
            <div class={`flex items-center gap-2 border ${colorBack} ${colorBorder} text-white px-3 py-1 rounded-full text-sm shadow-sm hover:scale-105 transition`}>
              <div class="size-5 flex items-center justify-center">
                <Icon />
              </div>
              <span>{name}</span>
            </div>
          ))}
        </div>
      )
    }
    <h3 class="text-2xl font-semibold mb-2 text-yellow-200">
      {title}
    </h3>
    <p class="text-gray-400 text-sm mt-2">{description}</p>
    <div class="flex justify-center gap-4 mt-4">
      {
        codeLink && (
          <a
            href={codeLink}
            target="_blank"
            class="flex items-center gap-2 px-4 py-1 bg-gray-800 text-white rounded hover:bg-gray-700 transition"
          >
            <GitHubIcon class="size-5"/>
            Code
          </a>
        )
      }

      {
        previewLink && (
          <a
            href={previewLink}
            target="_blank"
            class="flex items-center gap-2 px-4 py-1 bg-blue-600 text-white rounded hover:bg-blue-500 transition"
          >
            <Link class="size-5"/>
            Preview
          </a>
        )
      }
    </div>
  </div>
</div>
